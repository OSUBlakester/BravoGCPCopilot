<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DiceBear API Test</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 p-8">
    <div class="max-w-2xl mx-auto bg-white rounded-lg shadow-lg p-6">
        <h1 class="text-2xl font-bold mb-6">DiceBear API Direct Test</h1>
        
        <!-- Direct API Test -->
        <div class="mb-8">
            <h2 class="text-lg font-semibold mb-4">Direct DiceBear API Test</h2>
            <div class="grid grid-cols-2 gap-4">
                <div class="text-center">
                    <p class="font-medium mb-2">Adventurer Style</p>
                    <img id="test-adventurer" 
                         src="https://api.dicebear.com/9.x/adventurer/svg?seed=TestUser1" 
                         alt="Adventurer Avatar" 
                         class="w-32 h-32 mx-auto border rounded-lg">
                </div>
                <div class="text-center">
                    <p class="font-medium mb-2">Avataaars Style</p>
                    <img id="test-avataaars" 
                         src="https://api.dicebear.com/9.x/avataaars/svg?seed=TestUser2" 
                         alt="Avataaars Avatar" 
                         class="w-32 h-32 mx-auto border rounded-lg">
                </div>
                <div class="text-center">
                    <p class="font-medium mb-2">Personas Style</p>
                    <img id="test-personas" 
                         src="https://api.dicebear.com/9.x/personas/svg?seed=TestUser3" 
                         alt="Personas Avatar" 
                         class="w-32 h-32 mx-auto border rounded-lg">
                </div>
                <div class="text-center">
                    <p class="font-medium mb-2">Notionists Style</p>
                    <img id="test-notionists" 
                         src="https://api.dicebear.com/9.x/notionists/svg?seed=TestUser4" 
                         alt="Notionists Avatar" 
                         class="w-32 h-32 mx-auto border rounded-lg">
                </div>
            </div>
        </div>
        
        <!-- Test Controls -->
        <div class="mb-8">
            <h2 class="text-lg font-semibold mb-4">Interactive Test</h2>
            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-medium mb-1">Seed:</label>
                    <input id="test-seed" type="text" value="TestUser" 
                           class="w-full px-3 py-2 border rounded-md">
                </div>
                <div>
                    <label class="block text-sm font-medium mb-1">Style:</label>
                    <select id="test-style" class="w-full px-3 py-2 border rounded-md">
                        <option value="adventurer">Adventurer</option>
                        <option value="avataaars">Avataaars</option>
                        <option value="personas">Personas</option>
                        <option value="notionists">Notionists</option>
                        <option value="big-ears">Big Ears</option>
                        <option value="lorelei">Lorelei</option>
                    </select>
                </div>
                <button id="update-test" class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700">
                    Update Avatar
                </button>
            </div>
            
            <div class="mt-4 text-center">
                <img id="dynamic-avatar" 
                     src="https://api.dicebear.com/9.x/adventurer/svg?seed=TestUser" 
                     alt="Dynamic Avatar" 
                     class="w-48 h-48 mx-auto border rounded-lg">
                <p id="current-url" class="text-xs text-gray-600 mt-2 break-all"></p>
            </div>
        </div>
        
        <!-- Status Log -->
        <div>
            <h2 class="text-lg font-semibold mb-4">Status Log</h2>
            <div id="status-log" class="bg-gray-50 border rounded-lg p-4 h-32 overflow-y-auto text-sm font-mono">
                <!-- Status messages will appear here -->
            </div>
        </div>
    </div>

    <script>
        const statusLog = document.getElementById('status-log');
        
        function log(message) {
            const timestamp = new Date().toLocaleTimeString();
            statusLog.innerHTML += `<div>[${timestamp}] ${message}</div>`;
            statusLog.scrollTop = statusLog.scrollHeight;
            console.log(`[${timestamp}] ${message}`);
        }
        
        // Test image loading
        document.querySelectorAll('img[id^="test-"]').forEach(img => {
            const styleName = img.id.replace('test-', '');
            
            img.onload = () => {
                log(`✅ ${styleName} avatar loaded successfully`);
            };
            
            img.onerror = (error) => {
                log(`❌ ${styleName} avatar failed to load: ${error.message || 'Unknown error'}`);
            };
        });
        
        // Dynamic avatar controls
        const updateBtn = document.getElementById('update-test');
        const dynamicAvatar = document.getElementById('dynamic-avatar');
        const currentUrlEl = document.getElementById('current-url');
        
        function updateDynamicAvatar() {
            const seed = document.getElementById('test-seed').value || 'TestUser';
            const style = document.getElementById('test-style').value;
            const url = `https://api.dicebear.com/9.x/${style}/svg?seed=${encodeURIComponent(seed)}`;
            
            log(`Updating avatar: ${style} with seed "${seed}"`);
            currentUrlEl.textContent = url;
            
            dynamicAvatar.onload = () => {
                log(`✅ Dynamic avatar updated successfully`);
            };
            
            dynamicAvatar.onerror = (error) => {
                log(`❌ Dynamic avatar failed: ${error.message || 'Unknown error'}`);
            };
            
            dynamicAvatar.src = url;
        }
        
        updateBtn.addEventListener('click', updateDynamicAvatar);
        
        // Initialize
        log('DiceBear API test page loaded');
        updateDynamicAvatar();
    </script>
</body>
</html>