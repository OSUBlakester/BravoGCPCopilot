<!DOCTYPE html>
<html>
<head>
    <title>Free Style Communication</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="/static/freestyle.css">
    <link rel="stylesheet" href="/static/splash-screen.css">
    <style>
        /* --- Basic Body Style --- */
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f7f6;
        }

        /* --- Admin Toolbar Styles --- */
        .admin-toolbar {
            background-color: #ffffff;
            padding: 0.25rem 0.5rem;
            display: flex;
            justify-content: flex-end;
            align-items: center;
            gap: 0.4rem;
            flex-wrap: wrap;
        }

        /* --- Page Banner Styles --- */
        .page-banner {
            background-color: #002244;
            color: #FB4F14;
            padding: 0.75em 1.5em;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .page-banner h1 {
            margin: 0;
            font-size: 1.75em;
            font-weight: 500;
            text-align: left;
        }
    </style>
</head>
<body>
    <div class="page-banner">
        <h1 id="dynamic-page-title">Free Style Communication</h1>
        <div class="admin-toolbar">
            <!-- Always visible lock icon -->
            <button id="lock-icon" title="Admin Toolbar" class="h-8 w-8 flex items-center justify-center text-gray-600 bg-gray-100 rounded-full transition-colors duration-200 text-sm hover:bg-blue-100 hover:text-blue-600">
                <i class="fas fa-lock"></i>
            </button>
            <!-- Admin toolbar icons - initially hidden -->
            <div id="admin-icons" class="hidden flex items-center gap-0.4rem">
                <button id="lock-toolbar-button" title="Lock Admin Toolbar" class="h-8 w-8 flex items-center justify-center text-gray-600 bg-gray-100 rounded-full transition-colors duration-200 text-sm hover:bg-red-100 hover:text-red-600"><i class="fas fa-lock"></i></button>
                <span class="border-l border-gray-300 h-6 mx-1"></span> <!-- Separator -->
                <a href="admin_pages.html" title="Pages & Buttons" class="h-8 w-8 flex items-center justify-center text-gray-600 bg-gray-100 rounded-full transition-colors duration-200 text-sm hover:bg-blue-100 hover:text-blue-600"><i class="fas fa-th-large"></i></a>
                <a href="admin_settings.html" title="Global Settings" class="h-8 w-8 flex items-center justify-center text-gray-600 bg-gray-100 rounded-full transition-colors duration-200 text-sm hover:bg-blue-100 hover:text-blue-600"><i class="fas fa-cog"></i></a>
                <a href="user_current_admin.html" title="User Current Location" class="h-8 w-8 flex items-center justify-center text-gray-600 bg-gray-100 rounded-full transition-colors duration-200 text-sm hover:bg-blue-100 hover:text-blue-600"><i class="fas fa-map-marker-alt"></i></a>
                <a href="user_info_admin.html" title="User Info & Birthdays" class="h-8 w-8 flex items-center justify-center text-gray-600 bg-gray-100 rounded-full transition-colors duration-200 text-sm hover:bg-blue-100 hover:text-blue-600"><i class="fas fa-info-circle"></i></a>
                <a href="user_diary_admin.html" title="User Diary" class="h-8 w-8 flex items-center justify-center text-gray-600 bg-gray-100 rounded-full transition-colors duration-200 text-sm hover:bg-blue-100 hover:text-blue-600"><i class="fas fa-book-open"></i></a>
                <a href="audio_admin.html" title="Audio Devices" class="h-8 w-8 flex items-center justify-center text-gray-600 bg-gray-100 rounded-full transition-colors duration-200 text-sm hover:bg-blue-100 hover:text-blue-600"><i class="fas fa-volume-up"></i></a>
                <a href="favorites_admin.html" title="Favorites Topics" class="h-8 w-8 flex items-center justify-center text-gray-600 bg-gray-100 rounded-full transition-colors duration-200 text-sm hover:bg-blue-100 hover:text-blue-600"><i class="fas fa-star"></i></a>
                <a href="admin_audit_report.html" title="Activity Reports" class="h-8 w-8 flex items-center justify-center text-gray-600 bg-gray-100 rounded-full transition-colors duration-200 text-sm hover:bg-blue-100 hover:text-blue-600"><i class="fas fa-clipboard-list"></i></a>
                <button id="back-to-grid-admin" title="Back to Grid" class="h-8 w-8 flex items-center justify-center text-gray-600 bg-gray-100 rounded-full transition-colors duration-200 text-sm hover:bg-blue-100 hover:text-blue-600">
                    <i class="fas fa-grid-2-plus"></i>
                </button>
                <span class="border-l border-gray-300 h-6 mx-1"></span> <!-- Separator - made smaller -->
                <button id="switch-user-button" title="Switch User Profile" class="h-8 w-8 flex items-center justify-center text-gray-600 bg-gray-100 rounded-full transition-colors duration-200 text-sm hover:bg-blue-100 hover:text-blue-600"><i class="fas fa-users"></i></button>
                <button id="logout-button" title="Logout" class="h-8 w-8 flex items-center justify-center text-gray-600 bg-gray-100 rounded-full transition-colors duration-200 text-sm hover:bg-blue-100 hover:text-blue-600"><i class="fas fa-sign-out-alt"></i></button>
            </div>
        </div>
    </div>

    <!-- PIN Modal -->
    <div id="pin-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white p-6 rounded-lg shadow-xl max-w-sm w-full mx-4">
            <h3 class="text-lg font-semibold text-gray-800 mb-4">Enter Admin PIN</h3>
            <input type="text" id="pin-input" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="Enter PIN" maxlength="10">
            <div class="flex justify-end space-x-3 mt-4">
                <button id="pin-cancel" class="px-4 py-2 text-gray-600 bg-gray-200 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-500">Cancel</button>
                <button id="pin-submit" class="px-4 py-2 text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500">Submit</button>
            </div>
            <p id="pin-error" class="text-red-500 text-sm mt-2 hidden">Incorrect PIN. Please try again.</p>
        </div>
    </div>

    <!-- Build Space Section -->
    <div class="build-space-container">
        <label for="build-space">Build Space:</label>
        <textarea id="build-space" class="build-space-textarea" rows="2" placeholder="Your message will appear here as you select words..."></textarea>
        
        <!-- Control Buttons -->
        <div class="control-buttons">
            <button id="speak-display-btn" class="control-btn speak-btn">
                <i class="fas fa-volume-up"></i> Speak Display
            </button>
            <button id="clear-display-btn" class="control-btn clear-btn">
                <i class="fas fa-trash"></i> Clear Display
            </button>
            <button id="choose-word-btn" class="control-btn choose-word-button">
                <i class="fas fa-list"></i> Choose Word
            </button>
            <button id="spell-btn" class="control-btn spell-button">
                <i class="fas fa-keyboard"></i> Spell
            </button>
            <button id="go-back-btn" class="control-btn back-btn">
                <i class="fas fa-arrow-left"></i> Go Back
            </button>
        </div>
    </div>

    <!-- Word Generation Section -->
    <div class="word-generation-container">
        <!-- Word Options Grid -->
        <div id="word-options-grid" class="word-options-grid">
            <!-- Word options will be dynamically generated here -->
        </div>
    </div>

    <!-- Spelling Modal -->
    <div id="spelling-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Spell a Word</h3>
            </div>
            
            <div class="spelling-content">
                <!-- Current Word Display -->
                <div class="current-word-section">
                    <label for="current-word">Current Word:</label>
                    <input type="text" id="current-word" class="current-word-input" readonly>
                    <div class="word-controls">
                        <button id="add-word-btn" class="word-control-btn add-btn">
                            <i class="fas fa-plus"></i> Add Word
                        </button>
                        <button id="clear-word-btn" class="word-control-btn clear-btn">
                            <i class="fas fa-backspace"></i> Clear
                        </button>
                        <button id="backspace-btn" class="word-control-btn backspace-btn">
                            <i class="fas fa-arrow-left"></i> Backspace
                        </button>
                        <button id="cancel-spelling-btn" class="word-control-btn close-btn">
                            <i class="fas fa-times"></i> Cancel
                        </button>
                    </div>
                </div>

                <!-- Word Predictions -->
                <div class="predictions-section">
                    <h4>Suggested Words:</h4>
                    <div id="word-predictions" class="word-predictions-grid">
                        <!-- Word predictions will be generated here -->
                    </div>
                </div>

                <!-- Alphabet Grid -->
                <div class="alphabet-section">
                    <h4>Letters:</h4>
                    <div id="alphabet-grid" class="alphabet-grid">
                        <!-- Alphabet buttons will be generated by JavaScript -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Choose Word Modal -->
    <div id="choose-word-modal" class="modal-overlay hidden">
        <div class="freestyle-modal-container">
            <div class="freestyle-modal-header">
                <h3>Choose Word</h3>
            </div>
            
            <div class="freestyle-modal-content">
                <!-- Category Selection Section -->
                <div id="category-section" class="freestyle-modal-section">
                    <h4>Select a Category:</h4>
                    <div id="category-grid" class="freestyle-button-grid">
                        <!-- Categories will be generated by JavaScript -->
                    </div>
                    <div class="freestyle-modal-controls">
                        <button id="cancel-choose-word-btn" class="freestyle-modal-btn go-back-btn">
                            <i class="fas fa-arrow-left"></i> Go Back
                        </button>
                    </div>
                </div>

                <!-- Word Options Section -->
                <div id="word-options-section" class="freestyle-modal-section hidden">
                    <h4 id="selected-category-title">Category Words:</h4>
                    <div id="category-word-options-grid" class="freestyle-button-grid">
                        <!-- Word options will be generated by JavaScript -->
                    </div>
                    <div class="freestyle-modal-controls">
                        <button id="back-to-categories-btn" class="freestyle-modal-btn back-to-categories-btn">
                            <i class="fas fa-arrow-left"></i> Back to Categories
                        </button>
                        <button id="something-else-words-btn" class="freestyle-modal-btn something-else-btn">
                            <i class="fas fa-sync"></i> Something Else
                        </button>
                        <button id="go-back-from-words-btn" class="freestyle-modal-btn go-back-btn">
                            <i class="fas fa-times"></i> Go Back
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Loading Indicator -->
    <div id="loading-indicator" style="display: none;">
        <img src="/static/images/speech_bubble_spinner.png" alt="Loading..." class="image-spinner">
        <p>Loading...</p>
    </div>

    <script src="/static/splash-screen.js"></script>
    <script src="/static/freestyle.js"></script>
</body>
</html>
